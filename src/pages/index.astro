---
import AppLayout from '../layouts/AppLayout.astro';
import App from "../components/app/index"

const API_URL = "https://api.uidesign.ai";
// const api_url = import.meta.env.MODE === "development" ? "http://localhost:8000" : API_URL;
const api_url = API_URL;
---
<script>
// redirect user to Login
import { getSession } from "../components/auth/session";
import { OpenAPI } from "../client";

OpenAPI.BASE = "https://api.uidesign.ai";
getSession()
.then(tokens => { 
	// all good
})
.catch(err => {
	window.location.replace("/login")
})
</script>
<AppLayout title="UI Design">
	<App api_url={api_url} client:load></App>
</AppLayout>